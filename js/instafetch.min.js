!function(e,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var t={exports:{}};n(t.exports,t),e.fetchJsonp=t.exports}}(this,function(e,n){"use strict";function t(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(e){try{delete window[e]}catch(n){window[e]=void 0}}function c(e){var n=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(n)}function l(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=e,a=n.timeout||i.timeout,r=n.jsonpCallback||i.jsonpCallback,s=void 0;return new Promise(function(e,i){var u=n.jsonpCallbackFunction||t(),d=r+"_"+u;window[u]=function(n){e({ok:!0,json:function(){return Promise.resolve(n)}}),s&&clearTimeout(s),c(d),o(u)},l+=l.indexOf("?")===-1?"?":"&";var f=document.createElement("script");f.setAttribute("src",""+l+r+"="+u),f.id=d,document.getElementsByTagName("head")[0].appendChild(f),s=setTimeout(function(){i(new Error("JSONP request to "+l+" timed out")),o(u),c(d)},a)})}var i={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};n.exports=l}),function(e,n){"function"==typeof define&&define.amd?define([],n(e)):"object"==typeof exports?module.exports=n(e):e.instafetch=n(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var n,t,o,c,l,i,a,r,s,u,d={},f=!!document.querySelector&&!!e.addEventListener,m="https://api.instagram.com/v1/users/",p={userId:null,accessToken:null,target:"instafetch",numOfPics:20,caption:!1},g=function(e,n,t){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.call(t,e[o],o,e);else for(var c=0,l=e.length;c<l;c++)n.call(t,e[c],c,e)},h=function(e,n){var t={};return g(e,function(n,o){t[o]=e[o]}),g(n,function(e,o){t[o]=n[o]}),t},b=function(e){return"string"!=typeof e.userId?(console.log("userId must be a string."),!1):"string"!=typeof e.accessToken?(console.log("accessToken must be a string."),!1):"string"!=typeof e.target?(console.log("target must be a string."),!1):"number"!=typeof e.numOfPics?(console.log("numOfPics must be a number."),!1):"boolean"==typeof e.caption||(console.log("caption must be a boolean."),!1)},y=function(e){e.userId&&e.accessToken?e.userId===e.accessToken.split(".")[0]?(o=m+e.userId+"/media/recent/?access_token="+e.accessToken+"&count="+e.numOfPics+"&callback=?",fetchJsonp(o).then(function(e){return e.json()}).then(function(n){200===n.meta.code?v(n,e):console.log(n.meta.error_message)}).catch(function(e){console.log(e)})):console.log("accessToken is invalid for userId."):console.log("userId and accessToken are required.")},v=function(e,n){return(c=document.getElementById(n.target))?void e.data.forEach(function(e){l=document.createElement("article"),i=document.createElement("a"),i.href=e.link,i.target="_blank",a=document.createElement("figure"),r=document.createElement("img"),r.src=e.images.standard_resolution.url,a.appendChild(r),i.appendChild(a),l.appendChild(i),n.caption&&(s=document.createElement("div"),u=document.createElement("p"),u.innerHTML=e.caption.text,s.appendChild(u),i.appendChild(s)),c.appendChild(l)}):void console.log('No element with id="'+n.target+'" was found on the page.')};return d.destroy=function(){n&&(n=null,t=null,o=null,c=null,l=null,i=null,a=null,r=null,s=null,u=null)},d.init=function(e){f&&(d.destroy(),n=h(p,e||{}),t=b(n),t&&y(n))},d});
